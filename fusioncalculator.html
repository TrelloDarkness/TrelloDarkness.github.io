<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DBU Fusion Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">

<style>
  body {
    background: radial-gradient(circle at top, #0a0a0a, #000);
    color: #e0e0e0;
    font-family: 'Bubblegum Sans', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
  }

  h1 {
    color: #b800ff;
    text-shadow: 0 0 15px #b800ff, 0 0 30px #8000ff, 0 0 45px #b800ff;
    font-size: 2.3rem;
    text-align: center;
    margin-bottom: 25px;
    animation: glowPulse 2.5s infinite alternate;
  }

  @keyframes glowPulse {
    0% { text-shadow: 0 0 10px #b800ff, 0 0 20px #8000ff, 0 0 30px #b800ff; }
    100% { text-shadow: 0 0 25px #d000ff, 0 0 50px #b800ff, 0 0 70px #8000ff; }
  }

  .calculator {
    background: #111;
    border-radius: 25px;
    padding: 25px 30px;
    box-shadow: 0 0 25px rgba(184,0,255,0.7);
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 95%;
    max-width: 430px;
  }

  .row {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  label {
    font-size: 16px;
  }

  input {
    width: 100%;
    padding: 8px 10px;
    border-radius: 10px;
    border: none;
    background: #1a1a1a;
    color: #fff;
    text-align: center;
    font-family: 'Bubblegum Sans', sans-serif;
    font-size: 15px;
    outline: none;
  }

  .calc-btn, .back-btn {
    padding: 10px 20px;
    border-radius: 50px;
    border: none;
    background: #111;
    color: #b800ff;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 20px rgba(184,0,255,0.7);
    transition: all 0.3s ease;
    font-family: 'Bubblegum Sans', sans-serif;
  }

  .calc-btn:hover, .back-btn:hover {
    background: #b800ff;
    color: #0a0a0a;
    box-shadow: 0 0 30px #b800ff, 0 0 60px #d000ff;
  }

  .button-row {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .result {
    font-size: 18px;
    font-weight: bold;
    color: #d000ff;
    text-shadow: 0 0 10px #b800ff;
    text-align: center;
    margin-top: 10px;
  }
</style>
</head>
<body>

<h1>DBU Fusion Calculator</h1>

<div class="calculator">
  <div class="row">
    <label>Player 1's Stat</label>
    <input type="text" id="stat1" placeholder="e.g., 5T or 1.2B">
  </div>

  <div class="row">
    <label>Player 2's Stat</label>
    <input type="text" id="stat2" placeholder="e.g., 500M or 950K">
  </div>

  <div class="button-row">
    <button class="calc-btn" onclick="calculateFusionDance()">Fusion Dance</button>
    <button class="calc-btn" onclick="calculatePotara()">Potara</button>
  </div>

  <div class="result" id="result"></div>

  <button class="back-btn" onclick="window.location.href='index.html'">← Back</button>
</div>

<script>
function parseAbbreviatedNumber(input) {
  if (!input) return NaN;
  input = input.toLowerCase().trim();
  const map = {k:1e3, m:1e6, b:1e9, t:1e12, qd:1e15, qn:1e18};
  let mult = 1;
  for (let key in map) {
    if (input.endsWith(key)) {
      mult = map[key];
      input = input.slice(0, -key.length);
      break;
    }
  }
  return parseFloat(input) * mult;
}

function calculateFusionDance() {
  const stat1 = parseAbbreviatedNumber(document.getElementById('stat1').value);
  const stat2 = parseAbbreviatedNumber(document.getElementById('stat2').value);
  const resultDiv = document.getElementById('result');

  if (isNaN(stat1) || isNaN(stat2) || stat1 <= 0 || stat2 <= 0) {
    resultDiv.innerHTML = "⚠️ Please enter valid positive numbers (K, M, B, T, QD, QN).";
    return;
  }

  const small = Math.min(stat1, stat2);
  const large = Math.max(stat1, stat2);
  const perc = (small / large) * 100;

  let mult = 1;
  if (perc < 75) mult = 0.8;
  else if (perc < 92.5) mult = 1.2;
  else mult = 1.5;

  const fused = (stat1 + stat2) * mult;

  resultDiv.innerHTML = `
    Fusion Type: <b>Fusion Dance</b><br>
    Compatibility: <b>${perc.toFixed(1)}%</b> | Multiplier: <b>x${mult}</b><br>
    Total Fused Stat: <br><b>${formatNumber(fused)}</b>
  `;
}

function calculatePotara() {
  const stat1 = parseAbbreviatedNumber(document.getElementById('stat1').value);
  const stat2 = parseAbbreviatedNumber(document.getElementById('stat2').value);
  const resultDiv = document.getElementById('result');

  if (isNaN(stat1) || isNaN(stat2) || stat1 <= 0 || stat2 <= 0) {
    resultDiv.innerHTML = "⚠️ Please enter valid positive numbers (K, M, B, T, QD, QN).";
    return;
  }

  const mult = 2.5;
  const fused = (stat1 + stat2) * mult;

  resultDiv.innerHTML = `
    Fusion Type: <b>Potara</b><br>
    Multiplier: <b>x${mult}</b><br>
    Total Fused Stat: <br><b>${formatNumber(fused)}</b>
  `;
}

function formatNumber(num) {
  if (num >= 1e18) return (num/1e18).toFixed(2)+"QN";
  if (num >= 1e15) return (num/1e15).toFixed(2)+"QD";
  if (num >= 1e12) return (num/1e12).toFixed(2)+"T";
  if (num >= 1e9) return (num/1e9).toFixed(2)+"B";
  if (num >= 1e6) return (num/1e6).toFixed(2)+"M";
  if (num >= 1e3) return (num/1e3).toFixed(2)+"K";
  return num.toFixed(0);
}
</script>
</body>
</html>
