<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DBU Form Stacking Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">

<style>
  body {
    background: radial-gradient(circle at top, #0a0a0a, #000);
    color: #e0e0e0;
    font-family: 'Bubblegum Sans', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    gap: 20px;
  }

  h1 {
    color: #b800ff;
    text-shadow: 0 0 15px #b800ff, 0 0 30px #8000ff, 0 0 45px #b800ff;
    font-size: 2.3rem;
    text-align: center;
    margin-bottom: 10px;
    animation: glowPulse 2.5s infinite alternate;
  }

  @keyframes glowPulse {
    0% { text-shadow: 0 0 10px #b800ff, 0 0 20px #8000ff, 0 0 30px #b800ff; }
    100% { text-shadow: 0 0 25px #d000ff, 0 0 50px #b800ff, 0 0 70px #8000ff; }
  }

  .back-btn {
    display: inline-block;
    margin-bottom: 10px;
    padding: 10px 20px;
    border-radius: 50px;
    background: #111;
    color: #b800ff;
    font-weight: bold;
    text-decoration: none;
    box-shadow: 0 0 20px rgba(184,0,255,0.7);
    transition: all 0.3s ease;
    font-family: 'Bubblegum Sans', sans-serif;
  }

  .back-btn:hover {
    background: #b800ff;
    color: #0a0a0a;
    box-shadow: 0 0 30px #b800ff, 0 0 60px #d000ff;
  }

  .calculator {
    background: #111;
    border-radius: 25px;
    padding: 25px 30px;
    box-shadow: 0 0 25px rgba(184,0,255,0.7);
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 95%;
    max-width: 430px;
  }

  .row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
  }

  label {
    font-size: 16px;
    flex: 1;
    min-width: 130px;
  }

  input, select {
    flex: 1;
    width: 100%;
    padding: 6px 10px;
    border-radius: 10px;
    border: none;
    font-family: 'Bubblegum Sans', sans-serif;
    font-size: 14px;
    text-align: center;
    outline: none;
    background: #1a1a1a;
    color: #fff;
  }

  .level-toggle {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-top: 5px;
  }

  .level-toggle button {
    background: #222;
    border: none;
    border-radius: 8px;
    color: #fff;
    padding: 6px 10px;
    cursor: pointer;
    transition: 0.3s;
  }

  .level-toggle button.active {
    background: #b800ff;
    box-shadow: 0 0 15px #b800ff;
  }

  button.calc-btn {
    padding: 10px 20px;
    border-radius: 50px;
    border: none;
    background: #111;
    color: #b800ff;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 20px rgba(184,0,255,0.7);
    transition: all 0.3s ease;
    font-family: 'Bubblegum Sans', sans-serif;
    margin-top: 10px;
  }

  button.calc-btn:hover {
    background: #b800ff;
    color: #0a0a0a;
    box-shadow: 0 0 30px #b800ff, 0 0 60px #d000ff;
  }

  .result {
    font-size: 18px;
    font-weight: bold;
    color: #d000ff;
    text-shadow: 0 0 10px #b800ff;
    text-align: center;
  }

  .abbrev {
    font-size: 14px;
    color: #888;
    text-align: center;
    margin-top: 5px;
  }
</style>
</head>
<body>

<a href="index.html" class="back-btn">‚Üê Back to Menu</a>

<h1>DBU Form Stacking Calculator</h1>

<div class="calculator">
  <div class="row">
    <label>Enter Stat:</label>
    <input type="text" id="baseStat" placeholder="e.g. 3.5B">
  </div>

  <div class="row">
    <label>Base Form:</label>
    <select id="baseForm"></select>
  </div>
  <div class="level-toggle" id="baseLevelToggle">
    <button data-level="10" class="active">Level 10</button>
    <button data-level="20">Level 20</button>
  </div>

  <div class="row">
    <label>Second Form:</label>
    <select id="secondForm"></select>
  </div>
  <div class="level-toggle" id="secondLevelToggle">
    <button data-level="10" class="active">Level 10</button>
    <button data-level="20">Level 20</button>
  </div>

  <button class="calc-btn" onclick="calculate()">Calculate Boost</button>

  <div class="result" id="result">Total: 0</div>
  <div class="abbrev">Abbreviations: K, M, B, T, QD, QN</div>
</div>

<script>
const baseForms = {
  "Kaioken": [10,15],
  "FSSJ": [12,17],
  "SSJ": [15,20],
  "SSJ Kaioken": [17,22],
  "SSJ2": [25,30],
  "Spirit/Majin SSJ": [28,34],
  "SSJ3": [35,50],
  "LSSJ": [38,50],
  "Mystic": [40,50],
  "SSJ2 Kaioken": [35,35],
  "LSSJ Kaioken": [55,55],
  "Godly SSJ": [120,120],
  "Godly SSJ2": [140,190],
  "Godly SSJ3": [220,220]
};

const secondForms = {
  "Kaioken": [10,15],
  "FSSJ": [12,17],
  "SSJ": [15,20],
  "SSJ Kaioken": [17,22],
  "SSJ2": [25,30],
  "Spirit/Majin SSJ": [28,34],
  "SSJ3": [35,50],
  "LSSJ": [38,50],
  "Mystic": [40,50],
  "SSJ4": [45,55],
  "SSJG": [55,80],
  "SSJ Rage/Corrupt": [60,75],
  "SSJB/Rose": [80,100],
  "SSJB Kaioken": [85,110],
  "True Rose": [100,130],
  "SSJ Berserker": [110,130],
  "Kefla SSJ2": [115,135],
  "Dark Rose": [120,140],
  "Blue Evolution": [120,140],
  "Evil SSJ": [125,140],
  "Ultra Instinct Omen": [80,120],
  "Godly SSJ2": [140,190],
  "Mastered Ultra Instinct/Jiren": [150,190],
  "God Of Creation/Destruction": [180,210],
  "SSJB3/R3": [200,240],
  "LBSSJ4": [220,270],
  "Ultra Ego": [230,280],
  "SSJBUI": [230,280],
  "Beast": [250,300],
  "Pure/Corrupted Astral": [300,380],
  "True MUI/JUI": [380,450],
  "SSJBKx20": [150,150],
  "LSSJ Kaioken": [55,55],
  "Mystic Kaioken": [60,60],
  "SSJ5": [80,80],
  "LSSJ3": [80,80],
  "SSJG4": [100,100],
  "Godly SSJ": [120,120],
  "LSSJG": [130,130],
  "SSJ2 Kaioken": [35,35],
  "Super Broly": [185,185],
  "Godly SSJ3": [220,220],
  "True God Of Destruction/Creation": [230,230],
  "SSJB4": [250,250],
  "Blanco": [300,300],
  "CSSJB": [340,340],
  "CSSJB2": [360,360],
  "CSSJB3": [380,380],
  "True SSJG": [320,320],
  "Time Breaker": [420,420],
  "Ikari": [430,430],
  "Ikari SSJ3": [470,470],
  "Primal": [335,335]
};

function fillDropdowns() {
  const baseSelect = document.getElementById('baseForm');
  const secondSelect = document.getElementById('secondForm');
  for (let key in baseForms) {
    let opt = document.createElement('option');
    opt.value = key;
    opt.textContent = key;
    baseSelect.appendChild(opt);
  }
  for (let key in secondForms) {
    let opt = document.createElement('option');
    opt.value = key;
    opt.textContent = key;
    secondSelect.appendChild(opt);
  }
}

function parseNumber(str) {
  if (!str) return 0;
  str = str.toString().trim().toUpperCase();
  let mult = 1;
  if (str.endsWith("K")) { mult = 1e3; str = str.slice(0,-1); }
  else if (str.endsWith("M")) { mult = 1e6; str = str.slice(0,-1); }
  else if (str.endsWith("B")) { mult = 1e9; str = str.slice(0,-1); }
  else if (str.endsWith("T")) { mult = 1e12; str = str.slice(0,-1); }
  else if (str.endsWith("QD")) { mult = 1e15; str = str.slice(0,-2); }
  else if (str.endsWith("QN")) { mult = 1e18; str = str.slice(0,-2); }
  return parseFloat(str) * mult;
}

function formatNumber(num) {
  if (num >= 1e18) return (num/1e18).toFixed(2)+"QN";
  if (num >= 1e15) return (num/1e15).toFixed(2)+"QD";
  if (num >= 1e12) return (num/1e12).toFixed(2)+"T";
  if (num >= 1e9) return (num/1e9).toFixed(2)+"B";
  if (num >= 1e6) return (num/1e6).toFixed(2)+"M";
  if (num >= 1e3) return (num/1e3).toFixed(2)+"K";
  return num.toFixed(0);
}

function calculate() {
  const baseVal = parseNumber(document.getElementById('baseStat').value);
  const baseForm = document.getElementById('baseForm').value;
  const secondForm = document.getElementById('secondForm').value;
  const baseLevel = document.querySelector('#baseLevelToggle button.active').dataset.level;
  const secondLevel = document.querySelector('#secondLevelToggle button.active').dataset.level;

  const baseBoost = baseForms[baseForm][baseLevel === "10" ? 0 : 1];
  const secondBoost = secondForms[secondForm][secondLevel === "10" ? 0 : 1];

  const total = baseVal * (1 + baseBoost/100) * (1 + secondBoost/100);
  const gain = total - baseVal;

  document.getElementById('result').innerText =
    "Total: " + formatNumber(total) + " (+" + formatNumber(gain) + ")";
}

document.querySelectorAll('.level-toggle').forEach(toggle => {
  toggle.querySelectorAll('button').forEach(btn => {
    btn.addEventListener('click', () => {
      toggle.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
    });
  });
});

fillDropdowns();
</script>
</body>
</html>
